<!DOCTYPE html>
<html>
<head>
    <title>X (Twitter) Authentication</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/styles/global.css">
    <link rel="stylesheet" href="/styles/toast.css">
    <link rel="stylesheet" href="/styles/x-auth.css">
</head>
<body>
    <a href="/settings" class="back-link">
        <i class="bi bi-arrow-left"></i> Back to Settings
    </a>

    <main class="x-auth-container">
        <div class="x-auth-card">
            <div class="x-logo">
                <i class="bi bi-twitter-x"></i>
            </div>

            <h1 class="x-auth-title">X (Twitter) Integration</h1>

            <% if (user.xAuth && user.xAuth.accessToken) { %>
                <div class="connection-status">
                    <i class="bi bi-check-circle-fill"></i>
                    <strong>Connected to X</strong><br>
                    <small>Connected on <%= new Date(user.xAuth.connectedAt).toLocaleDateString() %></small>
                </div>

                <p class="x-auth-description">
                    Your account is connected to X. You can now share your posts directly to your X timeline.
                </p>

                <div class="disconnect-warning">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    Disconnecting will remove the ability to share posts to X automatically.
                </div>

                <button class="glass-button x-button disconnect-button">
                    <a class="x-link" href="/api/auth/x/disconnect?redirect=/x-auth">
                        <i class="bi bi-unlink"></i> Disconnect from X
                    </a>
                </button>
            <% } else { %>
                <p class="x-auth-description">
                    Connect your X (Twitter) account to automatically share your posts to your X timeline.
                    This will allow you to cross-post your content seamlessly.
                </p>

                <button class="glass-button x-button">
                    <a class="x-link" href="/api/auth/x/start?redirect=/x-auth">
                        <i class="bi bi-twitter-x"></i> Connect to X
                    </a>
                </button>

                <p class="security-note">
                    <i class="bi bi-shield-check"></i>
                    Your data is secure. We only request permission to post tweets on your behalf.
                </p>
            <% } %>
        </div>
    </main>

    <script src="/js/toast.js" defer></script>
</body>
</html>
